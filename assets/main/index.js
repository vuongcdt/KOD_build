System.register("chunks:///_virtual/Ammo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./Common.ts","./CONSTANTS.ts","./Plane.ts"],(function(t){var e,n,o,i,r,s,c,a,l,p,m,u,d,h,f,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.SpriteFrame,a=t.Vec3,l=t.Collider2D,p=t.Contact2DType,m=t.Sprite,u=t.tween,d=t.Component},function(t){h=t.Enemy},function(t){f=t.eventTarget},function(t){g=t.PLAY_AMMO_SOUND},function(t){v=t.Plane}],execute:function(){var _,y,C,S,T;r._RF.push({},"0c253cN4tlBq4dT/SO/BZS6","Ammo",void 0);var A=s.ccclass,b=s.property;t("Ammo",(_=A("Ammo"),y=b([c]),_((T=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"bodySprites",T,i(e)),e._damage=void 0,e._tweenMove=[],e._currentPos=a.ZERO,e._collider=void 0,e._target=void 0,e}n(e,t);var r=e.prototype;return r.init=function(t,e,n,o,i){f.emit(g),this._damage=n,this.node.angle=o,this._collider=this.getComponent(l),this._collider.on(p.BEGIN_CONTACT,this.onBeginContact,this),this.getComponent(m).spriteFrame=this.bodySprites[i],u(this.node).to(this.getTimeMove(t)/e,{position:t}).removeSelf().start()},r.getTimeMove=function(t){return a.distance(t,this.node.position)/500},r.initWithRocket=function(t,e,n,o,i){},r.onBeginContact=function(t,e,n){if(!e.node.getComponent(v)){var o=e.node.getComponent(h);o&&(u(this.node).removeSelf().start(),o.setHP(this._damage))}},e}(d)).prototype,"bodySprites",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=S))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/AmmoTank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ammo.ts","./TowerPlacement.ts"],(function(n){var t,o,e,r,c,a;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,r=n.BoxCollider2D},function(n){c=n.Ammo},function(n){a=n.TowerPlacement}],execute:function(){var i;o._RF.push({},"85a9aB/LcBHn6rvVnomIY8N","AmmoTank",void 0);var s=e.ccclass;e.property,n("AmmoTank",s("AmmoTank")(i=function(n){function o(){return n.apply(this,arguments)||this}return t(o,n),o.prototype.onBeginContact=function(n,t,o){var e=t.node.getParent().getComponent(a);t instanceof r&&e&&e.setHP(this._damage)},o}(c))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./CONSTANTS.ts"],(function(o){var e,t,n,r,u,i,l,c,a,s,m,S,p,h,f,d;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,n=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){u=o.cclegacy,i=o._decorator,l=o.AudioSource,c=o.Component},function(o){a=o.eventTarget},function(o){s=o.CHANGE_VOLUME_SOUND,m=o.CHANGE_VOLUME_MUSIC,S=o.PLAY_AMMO_SOUND,p=o.PLAY_ROCKET_SOUND,h=o.PLAY_EXPLOSION_SOUND,f=o.CHANGE_HAND_MUSIC,d=o.CHANGE_HAND_SOUND}],execute:function(){var g,b,y,N,A,_,v,C,O,k,D;u._RF.push({},"f82ef6a8wNJ4buHOtNs4RCN","AudioController",void 0);var E=i.ccclass,L=i.property;o("AudioController",(g=E("AudioController"),b=L(l),y=L(l),N=L(l),A=L(l),g((C=e((v=function(o){function e(){for(var e,t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return e=o.call.apply(o,[this].concat(u))||this,n(e,"backgroundSource",C,r(e)),n(e,"ammoSource",O,r(e)),n(e,"rocketSource",k,r(e)),n(e,"explosionSource",D,r(e)),e}t(e,o);var u=e.prototype;return u.onLoad=function(){a.on(s,this.changeVolumeSound,this),a.on(m,this.changeVolumeMusic,this),a.on(S,this.playAmmoSound,this),a.on(p,this.playRocketSound,this),a.on(h,this.playExplosionSound,this);var o=localStorage.getItem("music"),e=localStorage.getItem("sound");this.backgroundSource.volume=o?Number(o):.1,a.emit(f,null!=o?o:.1),this.ammoSource.volume=e?Number(e):.1,this.rocketSource.volume=e?Number(e):.1,this.explosionSource.volume=e?Number(e):.1,a.emit(d,null!=e?e:.1)},u.changeVolumeMusic=function(o){this.backgroundSource.volume=o,localStorage.setItem("music",o.toString())},u.changeVolumeSound=function(o){this.ammoSource.volume=o,this.rocketSource.volume=o,this.explosionSource.volume=o,localStorage.setItem("sound",o.toString())},u.playAmmoSound=function(){this.ammoSource.play()},u.playRocketSound=function(){this.rocketSource.play()},u.playExplosionSound=function(){this.explosionSource.play()},e}(c)).prototype,"backgroundSource",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(v.prototype,"ammoSource",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"rocketSource",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"explosionSource",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));u._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts"],(function(t){var e,n,o,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){c=t.default}],execute:function(){var s;n._RF.push({},"3afc5TikJlKGqZJgeLpRwRG","BaseComponent",void 0);var a=o.ccclass;o.property,t("BaseComponent",a("BaseComponent")(s=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._store=void 0,e}e(n,t);var o=n.prototype;return o.start=function(){this._store=c.getInstance()},o.update=function(t){},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseUIComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./Common.ts","./CONSTANTS.ts","./Enums.ts"],(function(t){var e,n,o,s,a,i,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){s=t.BaseComponent},function(t){a=t.eventTarget},function(t){i=t.HIDE_POPUP,r=t.PAUSE_GAME,c=t.UN_PAUSE_GAME},function(t){u=t.GameState}],execute:function(){var p;n._RF.push({},"ce3fbsnH8hCxJ45SHEv3vLY","BaseUIComponent",void 0);var m=o.ccclass;o.property,t("BaseUIComponent",m("BaseUIComponent")(p=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){t.prototype.start.call(this)},o.showNode=function(){a.emit(i),a.emit(r),this._store.gameState=u.PauseGame,this.node.parent=this._store.canvas},o.hideNode=function(){this.node.parent=null,this._store.gameState!=u.LoadingGame&&(this._store.gameState=u.PlayGame),a.emit(c)},n}(s))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/Cannon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,r,i,a,c,s,u,l,p,f,d,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,a=n._decorator,c=n.Node,s=n.Camera,u=n.input,l=n.Input,p=n.Vec3,f=n.UITransform,d=n.Vec2,h=n.Component}],execute:function(){var y,v,m,g,b,M,w,C,x;i._RF.push({},"27c4fEJZlxE5JeKQCnJJ02J","Cannon",void 0);var E=a.ccclass,z=a.property;n("Cannon",(y=E("Cannon"),v=z(c),m=z(s),g=z(c),y((w=e((M=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i))||this,o(e,"nodeParent",w,r(e)),o(e,"camera",C,r(e)),o(e,"node1",x,r(e)),e.systems=[],e}t(e,n);var i=e.prototype;return i.start=function(){u.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this)},i.onMouseMove=function(n){var e=n.getLocation(),t=new p;this.camera.screenToWorld(new p(e.x,e.y,0),t);var o=new p;this.node.getComponent(f).convertToNodeSpaceAR(t,o);var r=new d(o.x-this.node.position.x,o.y-this.node.position.y),i=Math.atan2(r.y,r.x)*(180/Math.PI);console.log("Góc giữa chuột và node: ",i),this.node1.angle=i-90},i.update=function(n){this.systems.forEach((function(e){e.update(n)}))},e}(h)).prototype,"nodeParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(M.prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(M.prototype,"node1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=M))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.EventTarget}],execute:function(){t._RF.push({},"bb976FtzrdA2IabQ6qUk5Si","Common",void 0);e("eventTarget",new n);t._RF.pop()}}}));

System.register("chunks:///_virtual/CONSTANTS.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"998c6gXY5tHeox2j0ihPbpb","CONSTANTS",void 0);E("SUB_COINT","SUB_COINT"),E("ADD_COINT","ADD_COINT"),E("SET_HEART","SET_HEART"),E("SET_WAVES","SET_WAVES"),E("SET_LEVEL","SET_LEVEL"),E("SET_COINT_TEXT","SET_COINT_TEXT"),E("SET_HEART_TEXT","SET_HEART_TEXT"),E("SET_WAVES_TEXT","SET_WAVES_TEXT"),E("SET_LEVEL_TEXT","SET_LEVEL_TEXT"),E("RESET_GAMELAY_UI","RESET_GAMELAY_UI"),E("HIDE_POPUP","HIDE_POPUP"),E("SHOW_HOME_SCREEN","SHOW_HOME_SCREEN"),E("SHOW_SETTING_POPUP","SHOW_SETTING_POPUP"),E("SHOW_GAME_OVER_POPUP","SHOW_GAME_OVER_POPUP"),E("SHOW_GAME_WIN_POPUP","SHOW_GAME_WIN_POPUP"),E("CHECK_GAME_WIN","CHECK_GAME_WIN"),E("RESET_GAME","RESET_GAME"),E("START_GAME","START_GAME"),E("PAUSE_GAME","PAUSE_GAME"),E("UN_PAUSE_GAME","UN_PAUSE_GAME"),E("SPEED_CHANGE","SPEED_CHANGE"),E("CHANGE_VOLUME_SOUND","CHANGE_VOLUME_SOUND"),E("CHANGE_VOLUME_MUSIC","CHANGE_VOLUME_MUSIC"),E("CHANGE_HAND_SOUND","CHANGE_HAND_SOUND"),E("CHANGE_HAND_MUSIC","CHANGE_HAND_MUSIC"),E("PLAY_AMMO_SOUND","PLAY_SHOOT_SOUND"),E("PLAY_ROCKET_SOUND","PLAY_ROCKET_SOUND"),E("PLAY_EXPLOSION_SOUND","PLAY_EXPLOSION_SOUND");_._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./CONSTANTS.ts","./Enums.ts"],(function(e){var t,i,a,r,n,o,s,l,h,c,u,p,v,d,y,f,_,m,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Enum,l=e.Node,h=e.SpriteFrame,c=e.Sprite,u=e.CircleCollider2D,p=e.RigidBody2D,v=e.Vec3,d=e.tween,y=e.Component},function(e){f=e.eventTarget},function(e){_=e.SET_WAVES,m=e.CHECK_GAME_WIN,g=e.ADD_COINT},function(e){b=e.CharacterType}],execute:function(){var w,S,C,P,T,A,M,E,H,z,B,D;n._RF.push({},"6679aSAA8NPFZljemA6aI0O","Enemy",void 0);var R=o.ccclass,I=o.property;e("Enemy",(w=R("Enemy"),S=I({type:s(b)}),C=I(l),P=I(l),T=I(h),w((E=t((M=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"characterType",E,r(t)),a(t,"healthBar",H,r(t)),a(t,"avatar",z,r(t)),a(t,"avatarSprites",B,r(t)),a(t,"health",D,r(t)),t._speed=1,t._damage=void 0,t._paths=[],t.tweenMove=[],t.tweenRotation=[],t._currentHealth=void 0,t._currentPos=void 0,t._levelManage=void 0,t._offset=30,t._collider=void 0,t._rigibody=void 0,t}i(t,e);var n=t.prototype;return n.init=function(e,t,i,a,r){var n,o,s,l=this;this._levelManage=t,this._currentHealth=this.health,this.healthBar.active=!1,this._paths=[],(n=this._paths).push.apply(n,e),this.avatar.getComponent(c).spriteFrame=this.avatarSprites,this._currentPos=this.node.position,this.avatar.angle=180,this._collider=this.getComponent(u),this._rigibody=this.getComponent(p),this.setPhysic(!1),this._paths.forEach((function(e,t){var n=0==t?l.node.position:l._paths[t-1],o=l.getTimeMove(n,e),s=new v(e.x+(Math.abs(i)-.5)*l._offset,e.y-i*l._offset),h=d(l.node).delay(0==t?a:0).call((function(){0==t&&(l.setPhysic(!0),f.emit(_,r))})).to(o,{position:s}),c=d(l.avatar).delay(0==t?a:0).to(1,{angle:l.getAngleAvatar(l._currentPos,e)}).delay(o-1);l.tweenMove.push(h),l.tweenRotation.push(c)})),(o=d(this.avatar)).sequence.apply(o,this.tweenRotation).start(),(s=d(this.node)).sequence.apply(s,this.tweenMove).removeSelf().start()},n.setPhysic=function(e){this._rigibody.enabled=e,this._collider.enabled=e},n.getAngleAvatar=function(e,t){var i=new v;v.subtract(i,e,t);var a=270-Math.atan2(i.x,i.y)*(180/Math.PI);return this._currentPos=t,a},n.getTimeMove=function(e,t){return v.distance(e,t)/50/this._speed},n.setHP=function(e){if(this._currentHealth-=e,this.healthBar.active=!0,this.healthBar.getComponentInChildren(c).fillRange=this._currentHealth/this.health,this._currentHealth<=0)switch(d(this.node).removeSelf().start(),f.emit(m),this.characterType){case b.Soldier:f.emit(g,30);break;case b.Tank:f.emit(g,100);break;case b.Plane:f.emit(g,50)}},t}(y)).prototype,"characterType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.Soldier}}),H=t(M.prototype,"healthBar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(M.prototype,"avatar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(M.prototype,"avatarSprites",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(M.prototype,"health",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 14}}),A=M))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"c62bckB/qxPVJPPXdNIoD79","Enums",void 0);e("GameState",function(e){return e[e.PlayGame=0]="PlayGame",e[e.OverGame=1]="OverGame",e[e.PauseGame=2]="PauseGame",e[e.LoadingGame=3]="LoadingGame",e}({})),e("CharacterType",function(e){return e[e.None=0]="None",e[e.Soldier=1]="Soldier",e[e.Tank=2]="Tank",e[e.Plane=3]="Plane",e[e.GunTower=4]="GunTower",e[e.RocketTower=5]="RocketTower",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Store.ts","./Common.ts","./CONSTANTS.ts","./Enemy.ts"],(function(e){var t,n,i,o,r,a,s,l,c,u,h,m,_,f,p,E,y,v,T,S,g,G,A,L,M,b,P,d,C,w,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.Graphics,c=e.Tween,u=e.director,h=e.Component},function(e){m=e.GameState},function(e){_=e.default},function(e){f=e.eventTarget},function(e){p=e.SUB_COINT,E=e.ADD_COINT,y=e.SET_HEART,v=e.SET_WAVES,T=e.RESET_GAME,S=e.PAUSE_GAME,g=e.UN_PAUSE_GAME,G=e.CHECK_GAME_WIN,A=e.SET_COINT_TEXT,L=e.SET_HEART_TEXT,M=e.SHOW_GAME_OVER_POPUP,b=e.SET_WAVES_TEXT,P=e.SET_LEVEL_TEXT,d=e.RESET_GAMELAY_UI,C=e.HIDE_POPUP,w=e.SHOW_GAME_WIN_POPUP},function(e){I=e.Enemy}],execute:function(){var O,W,N,H,U,x,z,D,R,V,X,k,B;r._RF.push({},"ed804AXMLtDcpVAPCBLjfQS","GameManager",void 0);var j=a.ccclass,F=a.property;e("GameManager",(O=j("GameManager"),W=F(s),N=F(s),H=F(s),U=F(s),x=F(s),O((R=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"canvas",R,o(t)),i(t,"enemyLayer",V,o(t)),i(t,"ammoLayer",X,o(t)),i(t,"towerLayer",k,o(t)),i(t,"homeScreen",B,o(t)),t._store=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){f.on(p,this.subCoint,this),f.on(E,this.addCoint,this),f.on(y,this.setHeart,this),f.on(v,this.setWave,this),f.on(T,this.resetGame,this),f.on(S,this.pauseGame,this),f.on(g,this.unPauseGame,this),f.on(G,this.checkGameWin,this)},r.start=function(){this._store=_.getInstance(),this._store.graphics=this.getComponent(l),this._store.ammoLayer=this.ammoLayer,this._store.towerLayer=this.towerLayer,this._store.canvas=this.canvas,this._store.levelMax=Number(localStorage.getItem("levelMax")),this.homeScreen.active=!0},r.addCoint=function(e){this._store.coinTotal+=e,f.emit(A)},r.subCoint=function(e){this._store.coinTotal-=e,f.emit(A)},r.setHeart=function(){this._store.heart--,f.emit(L),this.checkGameWin(),this._store.heart<=0&&(c.stopAll(),this._store.gameState=m.OverGame,f.emit(M))},r.setWave=function(e){this._store.waves=e,f.emit(b)},r.setLevel=function(e){this._store.levelPlaying=e,f.emit(P)},r.resetGame=function(){this._store.coinTotal=500,this._store.heart=3,this._store.waves=1,f.emit(d),f.emit(C)},r.pauseGame=function(){u.pause()},r.unPauseGame=function(){u.resume()},r.checkGameWin=function(){var e=this;this.scheduleOnce((function(){0==e.enemyLayer.getComponentsInChildren(I).length&&e._store.heart>0&&(console.log("GAME WIN"),e.pauseGame(),f.emit(w),e._store.levelPlaying==e._store.levelMax&&(e._store.levelMax++,localStorage.setItem("levelMax",e._store.levelMax.toString())))}))},t}(h)).prototype,"canvas",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(D.prototype,"enemyLayer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(D.prototype,"ammoLayer",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"towerLayer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(D.prototype,"homeScreen",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseUIComponent.ts","./Common.ts","./CONSTANTS.ts"],(function(e){var t,n,o,i,r,a,s,p,l,c,u,h,m,y,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,p=e.Button},function(e){l=e.BaseUIComponent},function(e){c=e.eventTarget},function(e){u=e.HIDE_POPUP,h=e.SHOW_GAME_OVER_POPUP,m=e.RESET_GAME,y=e.START_GAME,f=e.SHOW_HOME_SCREEN}],execute:function(){var v,B,E,P,_,d,C;r._RF.push({},"a3557ugtbNGybwv/xq/vr+T","GameOverPopup",void 0);var O=a.ccclass,G=a.property;e("GameOverPopup",(v=O("GameOverPopup"),B=G(s),E=G(s),v((d=t((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"homeBtn",d,i(t)),o(t,"replayBtn",C,i(t)),t}n(t,e);var r=t.prototype;return r.start=function(){e.prototype.start.call(this),this.hideNode(),c.on(u,this.hideNode,this),this.replayBtn.on(p.EventType.CLICK,this.onReplayGame,this),this.homeBtn.on(p.EventType.CLICK,this.onHomeBtnClick,this),c.on(h,this.showNode,this)},r.onReplayGame=function(){c.emit(m),c.emit(y)},r.onHomeBtnClick=function(){c.emit(m),c.emit(f)},t}(l)).prototype,"homeBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(_.prototype,"replayBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=_))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlayScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./CONSTANTS.ts","./BaseComponent.ts","./LevelData.ts"],(function(e){var t,i,n,s,r,o,a,l,c,u,T,h,p,v,f,g,y,x,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Label,l=e.Node,c=e.Button,u=e.director},function(e){T=e.eventTarget},function(e){h=e.SET_COINT_TEXT,p=e.SET_HEART_TEXT,v=e.SET_LEVEL_TEXT,f=e.SET_WAVES_TEXT,g=e.RESET_GAMELAY_UI,y=e.SHOW_SETTING_POPUP},function(e){x=e.BaseComponent},function(e){S=e.levels}],execute:function(){var b,_,m,E,P,d,L,C,w,B,G,I,z,A,H;r._RF.push({},"1eb74ANjctKqbap/qLDZl4v","GamePlayScreen",void 0);var N=o.ccclass,W=o.property;e("GamePlayScreen",(b=N("GamePlayScreen"),_=W(a),m=W(a),E=W(a),P=W(a),d=W(l),L=W(l),b((B=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"coinText",B,s(t)),n(t,"wavesText",G,s(t)),n(t,"heartText",I,s(t)),n(t,"levelText",z,s(t)),n(t,"settingBtn",A,s(t)),n(t,"speedBtn",H,s(t)),t}i(t,e);var r=t.prototype;return r.onLoad=function(){T.on(h,this.setCoinText,this),T.on(p,this.setHeartText,this),T.on(v,this.setLevelText,this),T.on(f,this.setWavesText,this),T.on(g,this.resetGamePlayUI,this)},r.start=function(){e.prototype.start.call(this),this.settingBtn.on(c.EventType.CLICK,this.showSettingPopup,this),this.speedBtn.on(c.EventType.CLICK,this.onSpeedClick,this),this.resetGamePlayUI()},r.resetGamePlayUI=function(){this.setCoinText(),this.setHeartText(),this.setLevelText(),this.setWavesText()},r.setCoinText=function(){this.coinText.string=this._store.coinTotal.toString()},r.setWavesText=function(){var e=S[this._store.levelPlaying].dataLevel.length;this.wavesText.string="Waves "+this._store.waves+"/"+e},r.setHeartText=function(){this.heartText.string=this._store.heart.toString()},r.setLevelText=function(){this.levelText.string=this._store.levelPlaying.toString()},r.showSettingPopup=function(){T.emit(y)},r.onSpeedClick=function(){u.getScheduler().setTimeScale(2)},t}(x)).prototype,"coinText",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(w.prototype,"wavesText",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(w.prototype,"heartText",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(w.prototype,"levelText",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(w.prototype,"settingBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(w.prototype,"speedBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=w))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseUIComponent.ts","./CONSTANTS.ts","./Common.ts"],(function(t){var e,n,i,o,r,a,s,p,l,c,u,h,m,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,p=t.Button},function(t){l=t.BaseUIComponent},function(t){c=t.HIDE_POPUP,u=t.SHOW_GAME_WIN_POPUP,h=t.RESET_GAME,m=t.START_GAME,y=t.SHOW_HOME_SCREEN},function(t){f=t.eventTarget}],execute:function(){var B,E,P,_,d,v,C;r._RF.push({},"c3805XRKLJE4I+2xUe/gnv6","GameWinPopup",void 0);var G=a.ccclass,T=a.property;t("GameWinPopup",(B=G("GameWinPopup"),E=T(s),P=T(s),B((v=e((d=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"homeBtn",v,o(e)),i(e,"replayBtn",C,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){t.prototype.start.call(this),this.hideNode(),f.on(c,this.hideNode,this),this.replayBtn.on(p.EventType.CLICK,this.onReplayGame,this),this.homeBtn.on(p.EventType.CLICK,this.onHomeBtnClick,this),f.on(u,this.showNode,this)},r.onReplayGame=function(){f.emit(h),f.emit(m)},r.onHomeBtnClick=function(){f.emit(h),f.emit(y)},e}(l)).prototype,"homeBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(d.prototype,"replayBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=d))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/HomeScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./CONSTANTS.ts","./BaseUIComponent.ts","./Enums.ts"],(function(e){var t,n,o,i,r,s,c,a,l,u,h,m,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.Layout,r=e.Button,s=e.Label,c=e.BlockInputEvents},function(e){a=e.eventTarget},function(e){l=e.SHOW_HOME_SCREEN,u=e.RESET_GAME,h=e.START_GAME},function(e){m=e.BaseUIComponent},function(e){p=e.GameState}],execute:function(){var S;n._RF.push({},"61ee8S98thM7pK4qd7WutEE","HomeScreen",void 0);var v=o.ccclass;o.property,e("HomeScreen",v("HomeScreen")(S=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){e.prototype.start.call(this),a.on(l,this.showHomeScreen,this),this.generateLevelSelect()},o.generateLevelSelect=function(){var e=this;this.node.getComponentInChildren(i).getComponentsInChildren(r).forEach((function(t,n){t.getComponentInChildren(s).string="Level "+(n+1),t.getComponentInChildren(c).node.active=n>e._store.levelMax,t.node.on(r.EventType.CLICK,(function(){return e.onLevelClicked(n+1)}),e)}))},o.onLevelClicked=function(e){this._store.levelPlaying=e-1,this._store.gameState=p.PlayGame,a.emit(u),a.emit(h),this.hideNode()},o.showHomeScreen=function(){this._store.gameState!=p.PlayGame&&a.emit(u),this.showNode(),this.generateLevelSelect()},n}(m))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelData.ts",["cc","./Enums.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.CharacterType}],execute:function(){t._RF.push({},"a3020ydm51BHbBEdMtz3ok2","LevelData",void 0);e("levels",[{name:"level 1",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]}]},{name:"level 2",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3.5}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3.5}]},{name:"wave 4",way:1,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3.5},{type:a.Soldier,total:3,timeDelay:5.5}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:7}]},{name:"wave 6",way:1,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:4},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:8.5},{type:a.Plane,total:3,timeDelay:9}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:1,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:4},{type:a.Tank,total:3,timeDelay:7},{type:a.Plane,total:3,timeDelay:9},{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:5}]}]},{name:"level 3",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 4",way:1,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:7}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:1,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 4",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 5",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 6",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 7",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 8",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 9",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]},{name:"level 10",dataLevel:[{name:"wave 1",way:0,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1}]},{name:"wave 2",way:1,dataEnemy:[{type:a.Soldier,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 3",way:0,dataEnemy:[{type:a.Tank,total:1,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3}]},{name:"wave 4",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:4}]},{name:"wave 5",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Soldier,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:4}]},{name:"wave 6",way:0,dataEnemy:[{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:6},{type:a.Plane,total:3,timeDelay:6}]},{name:"wave 7",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5}]},{name:"wave 8",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Plane,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:5},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Soldier,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7}]},{name:"wave 9",way:0,dataEnemy:[{type:a.Plane,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:1},{type:a.Tank,total:3,timeDelay:3},{type:a.Plane,total:3,timeDelay:3},{type:a.Tank,total:3,timeDelay:5},{type:a.Plane,total:3,timeDelay:5},{type:a.Soldier,total:3,timeDelay:7},{type:a.Soldier,total:3,timeDelay:9}]}]}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./TowerPlacement.ts","./Store.ts","./Enums.ts","./Common.ts","./CONSTANTS.ts","./LevelData.ts"],(function(e){var t,n,a,r,i,o,l,s,h,c,u,f,m,y,p,w,v,_,d,g,P,b,x,L,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Node,s=e.Prefab,h=e.SpriteFrame,c=e.Sprite,u=e.instantiate,f=e.randomRange,m=e.Vec3,y=e.randomRangeInt,p=e.Color,w=e.Component},function(e){v=e.Enemy},function(e){_=e.TowerPlacement},function(e){d=e.default},function(e){g=e.CharacterType,P=e.GameState},function(e){b=e.eventTarget},function(e){x=e.RESET_GAME,L=e.START_GAME},function(e){T=e.levels}],execute:function(){var E,S,k,C,z,M,A,B,W,D,G,N,H,I,R,F,O,V,X,j,J,K,U,q,Q;i._RF.push({},"d6ef80OwINPsK+EiWT/5JVt","LevelManager",void 0);var Y=o.ccclass,Z=o.property;e("LevelManager",(E=Y("LevelManager"),S=Z(l),k=Z(l),C=Z(l),z=Z(l),M=Z([s]),A=Z(l),B=Z(l),W=Z(l),D=Z(s),G=Z([h]),N=Z(l),E((R=t((I=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"maskLayer",R,r(t)),a(t,"enemyLayer",F,r(t)),a(t,"ammoLayer",O,r(t)),a(t,"towerLayer",V,r(t)),a(t,"prefabEnemies",X,r(t)),a(t,"wayPathBlock",j,r(t)),a(t,"planePathBlock",J,r(t)),a(t,"towerPlacementBlock",K,r(t)),a(t,"towerPlacementPrefab",U,r(t)),a(t,"stoneSprites",q,r(t)),a(t,"background",Q,r(t)),t._store=void 0,t._treeNodes=[],t._wayPaths=[],t._planePath=[],t._towerPlacements=[],t._towerPlacementList=[],t._indexSpawn=0,t._arrIndex=[0,1,-1,2,-2,3,-3],t._countTime=0,t._timeWave=20,t._offsetWay=150,t}n(t,e);var i=t.prototype;return i.start=function(){b.on(x,this.resetGame,this),this.maskLayer.on(l.EventType.TOUCH_START,this.onTouchStart,this),b.on(L,this.startGame,this),this.node.active=!1,this.enabled=!1,this.setStore()},i.setStore=function(){this._store=d.getInstance(),this._store.levelManager=this.node},i.setDataGenerate=function(){var e=this;this.planePathBlock.children.forEach((function(e){e.getComponent(c).spriteFrame=null})),this._treeNodes=this.background.children,this._planePath=this.planePathBlock.children.map((function(e){return e.position})),this._towerPlacements=this.towerPlacementBlock.children.map((function(e){return e.position})),this.wayPathBlock.children.forEach((function(t,n){e._wayPaths[n]=[];for(var a=t.children,r=0;r<a.length-1;r++){var i;a[r].getComponent(c).spriteFrame=null;var o=a[r].position,l=a[r+1].position,s=e.findDividePoints(o,l,2);e._wayPaths[n].push(o),(i=e._wayPaths[n]).push.apply(i,s)}}))},i.startGame=function(){var e,t=this,n=this.node.getSiblingIndex()==this._store.levelPlaying;n&&(this.node.active=n,this.setDataGenerate(),this.generateWay(),this.generateStoneAndTree(),this.generateTowerPlacement(),this._countTime=0,null!=(e=T[this._store.levelPlaying])&&e.dataLevel?(this.enemyLayer.removeAllChildren(),T[this._store.levelPlaying].dataLevel.forEach((function(e,n){var a=e.dataEnemy,r=e.way;a.forEach((function(e){var a=e.type==g.Plane?t._planePath:t._wayPaths[r];t._countTime+=e.timeDelay;for(var i=n*t._timeWave+1.5*e.timeDelay,o=0,l=Array(e.total);o<l.length;o++){l[o];t.spawnEnemy(t.prefabEnemies[e.type-1],a,i,n+1)}}))}))):console.error("No data!"))},i.spawnEnemy=function(e,t,n,a){var r=u(e);r.parent=this.enemyLayer,r.position=t[0];var i=this._arrIndex[this._indexSpawn];r.getComponent(v).init(t,this,i,n,a),this._indexSpawn++,this._indexSpawn>2&&(this._indexSpawn=0)},i.generateStoneAndTree=function(){for(var e=this,t=[];!(t.length>this._treeNodes.length-1);){for(var n=f(-960,960),a=f(-600,600),r=!0,i=0;i<this._wayPaths.length;i++){for(var o=this._wayPaths[i],l=0;l<o.length-1;l++){var s=o[l],h=o[l+1],u=Math.max(s.x,h.x),p=Math.min(s.x,h.x),w=Math.max(s.y,h.y),v=Math.min(s.y,h.y);if(n<u+this._offsetWay&&n>p-this._offsetWay&&a<w+this._offsetWay&&a>v-this._offsetWay){r=!1;break}}if(!r)break}for(var _=0;_<this._towerPlacements.length-1;_++){var d=this._towerPlacements[_],g=this._towerPlacements[_+1],P=Math.max(d.x,g.x),b=Math.min(d.x,g.x),x=Math.max(d.y,g.y),L=Math.min(d.y,g.y);if(n<P+this._offsetWay&&n>b-this._offsetWay&&a<x+this._offsetWay&&a>L-this._offsetWay){r=!1;break}}r&&t.push(new m(n,a))}t.forEach((function(t,n){e._treeNodes[n].position=t,e._treeNodes[n].getComponent(c).spriteFrame=e.stoneSprites[y(0,e.stoneSprites.length)]}))},i.generateWay=function(){var e=this,t=this._store.graphics;t.clear(),this._wayPaths.forEach((function(n){t.strokeColor=(new p).fromHEX("#B1B1B1"),t.lineWidth=170,e.drawBezierCurve(t,n),t.stroke()})),this._wayPaths.forEach((function(n){t.strokeColor=(new p).fromHEX("#47565A"),t.lineWidth=150,e.drawBezierCurve(t,n),t.stroke()}))},i.drawBezierCurve=function(e,t){e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length-1;n+=3){var a=t[n-1],r=t[n],i=t[n+1];e.bezierCurveTo(a.x,a.y,r.x,r.y,i.x,i.y)}},i.findDividePoints=function(e,t,n){for(var a=[],r=new m(t.x-e.x,t.y-e.y,t.z-e.z),i=1;i<=n;i++){var o=i/(n+1),l=new m(e.x+r.x*o,e.y+r.y*o,e.z+r.z*o);a.push(l)}return a},i.generateTowerPlacement=function(){var e=this;this._towerPlacements.forEach((function(t){var n=u(e.towerPlacementPrefab);n.parent=e.towerLayer,n.position=t,n.getComponent(_).levelManager=e.node;var a=n.getComponent(_);a.levelManager=e.node,e._towerPlacementList.push(a)}))},i.onTouchStart=function(e){this._towerPlacementList.forEach((function(e){e.onHideAction()}))},i.onHideActionTower=function(e){this._towerPlacementList.filter((function(t){return t!=e})).forEach((function(e){e.onHideAction()}))},i.resetGame=function(){this.enemyLayer.removeAllChildren(),this.ammoLayer.removeAllChildren(),this.towerLayer.removeAllChildren(),this._store.gameState=P.PlayGame,this.generateTowerPlacement()},t}(w)).prototype,"maskLayer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(I.prototype,"enemyLayer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(I.prototype,"ammoLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(I.prototype,"towerLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(I.prototype,"prefabEnemies",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=t(I.prototype,"wayPathBlock",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(I.prototype,"planePathBlock",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(I.prototype,"towerPlacementBlock",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(I.prototype,"towerPlacementPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(I.prototype,"stoneSprites",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=t(I.prototype,"background",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=I))||H));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseUIComponent.ts","./Enums.ts"],(function(e){var r,t,n,o,i,s,a,c,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.ProgressBar,c=e.Label},function(e){l=e.BaseUIComponent},function(e){p=e.GameState}],execute:function(){var u,g,f,d,h,_,m;i._RF.push({},"7407c81rIFAJZ85lrxDpSnu","LoadingScreen",void 0);var v=s.ccclass,y=s.property;e("LoadingScreen",(u=v("LoadingScreen"),g=y(a),f=y(c),u((_=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,n(r,"progressBar",_,o(r)),n(r,"progressText",m,o(r)),r._count=0,r._time=0,r}t(r,e);var i=r.prototype;return i.start=function(){e.prototype.start.call(this),this._store.gameState=p.LoadingGame,this.setSlider()},i.setSlider=function(){var e=this;this.progressBar.progress=0,this.progressText.string="0%",this._time=setInterval((function(){if(e._count>100)return clearInterval(e._time),void e.hideNode();e._count++,e.progressBar.progress=e._count/100,e.progressText.string=e._count+"%"}),10)},r}(l)).prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=r(h.prototype,"progressText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Cannon.ts","./AudioController.ts","./CONSTANTS.ts","./Common.ts","./Enums.ts","./GameManager.ts","./Ammo.ts","./AmmoTank.ts","./BaseComponent.ts","./Enemy.ts","./LevelManager.ts","./Plane.ts","./Rocket.ts","./Tank.ts","./Target.ts","./TowerPlacement.ts","./Turent.ts","./TurrentTank.ts","./LevelData.ts","./Store.ts","./Test.ts","./BaseUIComponent.ts","./GameOverPopup.ts","./GamePlayScreen.ts","./GameWinPopup.ts","./HomeScreen.ts","./LoadingScreen.ts","./SettingPopup.ts","./SliderCustom.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts"],(function(e){var n,t,r,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator},function(e){o=e.Enemy}],execute:function(){var c;t._RF.push({},"88f76b/RWhDooEVO2etE2JF","Plane",void 0);var s=r.ccclass;r.property,e("Plane",s("Plane")(c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Rocket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ammo.ts","./Store.ts","./Common.ts","./CONSTANTS.ts","./Enemy.ts"],(function(t){var e,o,n,i,s,r,a,c,h,l,u,f,d,g,v,p,m;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Collider2D,s=t.Sprite,r=t.randomRangeInt,a=t.tween,c=t.Contact2DType,h=t.Vec3,l=t.Color,u=t.math},function(t){f=t.Ammo},function(t){d=t.default},function(t){g=t.eventTarget},function(t){v=t.PLAY_ROCKET_SOUND,p=t.PLAY_EXPLOSION_SOUND},function(t){m=t.Enemy}],execute:function(){var _;o._RF.push({},"f81a86wCuhGH6B+9FUvEjc4","Rocket",void 0);var T=n.ccclass;n.property,t("Rocket",T("Rocket")(_=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._angleOffset=20,e._offsetRound=70,e._offsetLine=250,e._speed=1,e}e(o,t);var n=o.prototype;return n.initWithRocket=function(t,e,o,n,c){var h=this;g.emit(v),this._target=t,this._speed=e,this._damage=o,this.node.angle=n,this._collider=this.getComponent(i),this.getComponent(s).spriteFrame=this.bodySprites[c];var l=.7+r(0,5)/5,u=t.position.clone().subtract(this.node.position).normalize(),f=u.clone().multiplyScalar(this._offsetLine*l),d=t.position.clone().add(f);a(this.node).to(this.getTimeMove(d),{position:d}).call((function(){return h.moveRocket(u)})).start()},n.moveRocket=function(t){var e=this,o=1;this.moveRound(t,o);var n=setInterval((function(){o++;var i=e.getAngleToTarget();e.node.angle-i>1*e._angleOffset?e.moveRound(t,o):(clearInterval(n),e._collider.on(c.BEGIN_CONTACT,e.onBeginContact,e),e.moveToTarget(i),n=setInterval((function(){e.moveToTarget(n)}),e._offsetRound),setTimeout((function(){clearInterval(n)}),1e3))}),this._offsetRound)},n.moveRound=function(t,e){this._currentPos=this.node.position;var o=this.rotateVector(t.clone().multiplyScalar(this._offsetRound),-this._angleOffset*e),n=this.node.position.clone().add(o),i=this.node.angle-this._angleOffset;a(this.node).to(this.getTimeMove(n),{position:n}).start(),a(this.node).to(.5*this.getTimeMove(n),{angle:i}).start()},n.moveToTarget=function(t){var e=this._target.position.clone().subtract(this.node.position).normalize(),o=h.distance(this._target.position,this.node.position),n=e.clone().multiplyScalar(this._offsetRound),i=h.ZERO;o<2*this._offsetRound?(i=this._target.position,clearInterval(t),a(this.node).to(this.getTimeMove(i),{position:i}).removeSelf().start()):(i=this.node.position.clone().add(n),a(this.node).to(this.getTimeMove(i),{position:i}).start());var s=this.getAngleRocket(i);a(this.node).to(.5*this.getTimeMove(i),{angle:s}).start()},n.getTimeMove=function(t){return h.distance(t,this.node.position)/1e3/this._speed},n.drawLineFromPoints=function(t){var e=d.getInstance().graphics;e.strokeColor=l.RED,e.lineWidth=5,e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.stroke()},n.rotateVector=function(t,e){var o=u.toRadian(e),n=t.x,i=t.y,s=n*Math.cos(o)-i*Math.sin(o),r=n*Math.sin(o)+i*Math.cos(o);return new h(s,r)},n.getAngleRocket=function(t){var e=t.clone().subtract(this._currentPos.clone());return this._currentPos=t.clone(),(270+Math.atan2(e.y,e.x)*(180/Math.PI))%360},n.getAngleToTarget=function(){var t=this._target.position.clone().subtract(this._currentPos);return Math.atan2(t.y,t.x)*(180/Math.PI)-90},n.drawCurve=function(t,e,o){var n=d.getInstance().graphics;n.strokeColor=l.RED,n.lineWidth=5,n.moveTo(t.x,t.y),n.bezierCurveTo(t.x,t.y,e.x,e.y,o.x,o.y),n.stroke()},n.getBezierPoints=function(t,e,o,n){for(var i=[],s=1/(t-1),r=0;r<t;r++){var a=s*r,c=Math.pow(1-a,2)*e.x+2*(1-a)*a*o.x+Math.pow(a,2)*n.x,l=Math.pow(1-a,2)*e.y+2*(1-a)*a*o.y+Math.pow(a,2)*n.y;i.push(new h(c,l,0))}return i},n.onBeginContact=function(t,e,o){var n=e.node.getComponent(m);n&&(g.emit(p),a(this.node).removeSelf().start(),n.setHP(this._damage))},o}(f))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CONSTANTS.ts","./Common.ts","./BaseUIComponent.ts"],(function(t){var e,n,o,i,s,r,p,c,h,a,l,u,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,p=t.Node,c=t.Button,h=t.BlockInputEvents},function(t){a=t.SHOW_SETTING_POPUP,l=t.HIDE_POPUP,u=t.SHOW_HOME_SCREEN},function(t){d=t.eventTarget},function(t){f=t.BaseUIComponent}],execute:function(){var S,g,m,y,P,v,C;s._RF.push({},"dffabD07vhExZ5VMnlxK+a5","SettingPopup",void 0);var T=r.ccclass,B=r.property;t("SettingPopup",(S=T("SettingPopup"),g=B(p),m=B(p),S((v=e((P=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"homeBtn",v,i(e)),o(e,"closeBtn",C,i(e)),e}n(e,t);var s=e.prototype;return s.start=function(){t.prototype.start.call(this),this.hideNode(),d.on(a,this.showSettingPopup,this),d.on(l,this.hideNode,this),this.homeBtn.on(c.EventType.CLICK,this.showHomeScreen,this),this.closeBtn.on(c.EventType.CLICK,this.hideNode,this),this.node.getComponentInChildren(h).node.on(p.EventType.TOUCH_START,this.hideNode,this)},s.showHomeScreen=function(){d.emit(u)},s.showSettingPopup=function(){this.showNode()},e}(f)).prototype,"homeBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(P.prototype,"closeBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=P))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/SliderCustom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./CONSTANTS.ts"],(function(s){var r,e,i,o,n,t,u,d,l,a,c,h,g,p;return{setters:[function(s){r=s.applyDecoratedDescriptor,e=s.inheritsLoose,i=s.initializerDefineProperty,o=s.assertThisInitialized},function(s){n=s.cclegacy,t=s._decorator,u=s.Slider,d=s.ProgressBar,l=s.Component},function(s){a=s.eventTarget},function(s){c=s.CHANGE_HAND_MUSIC,h=s.CHANGE_HAND_SOUND,g=s.CHANGE_VOLUME_SOUND,p=s.CHANGE_VOLUME_MUSIC}],execute:function(){var S,m,C,_,f,B,P;n._RF.push({},"10fcdw++AFABL7U7yFAd0z4","SliderCustom",void 0);var y=t.ccclass,A=t.property;s("SliderCustom",(S=y("SliderCustom"),m=A(u),C=A(u),S((B=r((f=function(s){function r(){for(var r,e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return r=s.call.apply(s,[this].concat(n))||this,i(r,"soundSlider",B,o(r)),i(r,"musicSlider",P,o(r)),r._soundProgressBar=void 0,r._musicProgressBar=void 0,r}e(r,s);var n=r.prototype;return n.onLoad=function(){this._soundProgressBar=this.soundSlider.getComponentInChildren(d),this._musicProgressBar=this.musicSlider.getComponentInChildren(d),this.soundSlider.node.on("slide",this.onChangeSoundSlider,this),this.musicSlider.node.on("slide",this.onChangeMusicSlider,this),this._soundProgressBar.progress=this.soundSlider.progress,this._musicProgressBar.progress=this.musicSlider.progress,a.on(c,this.onChangeHandMusic,this),a.on(h,this.onChangeHandSound,this)},n.onChangeSoundSlider=function(s){this._soundProgressBar.progress=this.soundSlider.progress,a.emit(g,s.progress)},n.onChangeMusicSlider=function(s){this._musicProgressBar.progress=this.musicSlider.progress,a.emit(p,s.progress)},n.onChangeHandSound=function(s){this.soundSlider.progress=s,this._soundProgressBar.progress=s},n.onChangeHandMusic=function(s){this.musicSlider.progress=s,this._musicProgressBar.progress=s},r}(l)).prototype,"soundSlider",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=r(f.prototype,"musicSlider",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=f))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Store.ts",["cc","./Enums.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){n=t.GameState}],execute:function(){var a,s;e._RF.push({},"8a0d8k7Qj9JBoO9V9KUES1E","Store",void 0);var c=i.ccclass;t("default",c(((s=function(){function t(){this.canvas=void 0,this.levelManager=void 0,this.ammoLayer=void 0,this.towerLayer=void 0,this.graphics=void 0,this.gameState=n.PlayGame,this.heart=3,this.coinTotal=500,this.waves=1,this.levelPlaying=0,this.levelMax=0}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}()).instance=void 0,a=s))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Tank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts"],(function(e){var t,n,i,r,a,o,s,l,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,l=e.SpriteFrame,c=e.Sprite},function(e){p=e.Enemy}],execute:function(){var u,f,h,d,y,k,T;a._RF.push({},"23ef6JYfrxC5bGv3I9qtL2s","Tank",void 0);var b=o.ccclass,g=o.property;e("Tank",(u=b("Tank"),f=g(s),h=g(l),u((k=t((y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"headTank",k,r(t)),i(t,"headSprites",T,r(t)),t._offset=60,t}n(t,e);var a=t.prototype;return a.start=function(){this.headTank.getComponent(c).spriteFrame=this.headSprites,this.headTank.angle=180},a.update=function(e){},a.init=function(t,n,i,r,a){e.prototype.init.call(this,t,n,i,r,a)},t}(p)).prototype,"headTank",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(y.prototype,"headSprites",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./Common.ts","./CONSTANTS.ts"],(function(t){var e,n,o,r,i,c,s,a,u,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Collider2D,i=t.Contact2DType,c=t.tween,s=t.Component},function(t){a=t.Enemy},function(t){u=t.eventTarget},function(t){p=t.SET_HEART}],execute:function(){var f;n._RF.push({},"ed9beWdbuBLQbe1DWMxqfV1","Target",void 0);var g=o.ccclass;o.property,t("Target",g("Target")(f=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){var t=this.getComponent(r);t&&t.on(i.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(t,e,n){var o=e.node.getComponent(a);o&&(c(o.node).removeSelf().start(),u.emit(p))},n}(s))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,n,i,a,s,c,u,p,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Node,c=e.v3,u=e.Graphics,p=e.Color,l=e.Vec3,h=e.Component}],execute:function(){var v,y,f,d,g;i._RF.push({},"8fc9d7PKepKWKXUzL1ad+hV","Test",void 0);var w=a.ccclass,x=a.property;e("Test",(v=w("Test"),y=x(s),v((g=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"target",g,n(t)),t}r(t,e);var i=t.prototype;return i.start=function(){c(0,0),c(400,300),c(500,0),c(100,100),c(200,-600),c(300,-100)},i.drawCurve=function(e,t,r){var o=this.getComponent(u);o.strokeColor=p.RED,o.lineWidth=15,o.moveTo(e.x,e.y),o.bezierCurveTo(e.x,e.y,t.x,t.y,r.x,r.y),o.stroke();var n=this.getBezierPoints(10,e,t,r);console.log("Bezier Curve Points:",n)},i.getBezierPoints=function(e,t,r,o){for(var n=[],i=1/(e-1),a=0;a<e;a++){var s=i*a,c=Math.pow(1-s,2)*t.x+2*(1-s)*s*r.x+Math.pow(s,2)*o.x,u=Math.pow(1-s,2)*t.y+2*(1-s)*s*r.y+Math.pow(s,2)*o.y;n.push(new l(c,u,0))}return n},i.update=function(e){},t}(h)).prototype,"target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerPlacement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelManager.ts","./Store.ts","./Turent.ts","./Enums.ts","./Common.ts","./CONSTANTS.ts"],(function(t){var e,i,n,r,o,a,s,h,l,c,u,p,_,T,g,v,f,w,d,y,b,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Prefab,l=t.Node,c=t.SpriteFrame,u=t.Sprite,p=t.Label,_=t.instantiate,T=t.tween,g=t.Component},function(t){v=t.LevelManager},function(t){f=t.default},function(t){w=t.Turent},function(t){d=t.CharacterType},function(t){y=t.eventTarget},function(t){b=t.SUB_COINT,S=t.ADD_COINT}],execute:function(){var C,m,R,k,B,H,G,P,U,A,z,I,M,O,E,D,L,N,F,x,j,q,J,W,X;a._RF.push({},"e24eesDnW1JaqX/vEPGxyg4","TowerPlacement",void 0);var K=s.ccclass,Q=s.property;t("TowerPlacement",(C=K("TowerPlacement"),m=Q(h),R=Q(h),k=Q(l),B=Q(l),H=Q(l),G=Q(l),P=Q(l),U=Q(l),A=Q([c]),z=Q(l),I=Q(l),C((E=e((O=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"gunTowerPrefab",E,r(e)),n(e,"rocketTowerPrefab",D,r(e)),n(e,"action",L,r(e)),n(e,"actionBuyRocket",N,r(e)),n(e,"actionUpgrade",F,r(e)),n(e,"actionRepair",x,r(e)),n(e,"actionSell",j,r(e)),n(e,"actionBuyGun",q,r(e)),n(e,"backgrounds",J,r(e)),n(e,"healthBar",W,r(e)),n(e,"fire",X,r(e)),e._store=void 0,e._levelManager=void 0,e._background=void 0,e._levelTower=0,e._turrent=void 0,e._health=200,e._costGun=150,e._costRocket=300,e._currentHealth=void 0,e._turrentType=void 0,e}i(e,t);var a=e.prototype;return a.start=function(){this._store=f.getInstance(),this._background=this.getComponent(u),this.onHideAction(),this.healthBar.active=!1,this.fire.active=!1,this.node.on(l.EventType.TOUCH_START,this.onShowAction,this),this.actionBuyRocket.on(l.EventType.TOUCH_START,this.onBuyRocket,this),this.actionBuyGun.on(l.EventType.TOUCH_START,this.onBuyGun,this),this.actionSell.on(l.EventType.TOUCH_START,this.onSell,this),this.actionUpgrade.on(l.EventType.TOUCH_START,this.onUpgrade,this),this.actionRepair.on(l.EventType.TOUCH_START,this.onRepair,this),this.actionBuyGun.getComponentInChildren(p).string=this._costGun.toString(),this.actionBuyRocket.getComponentInChildren(p).string=this._costRocket.toString()},a.update=function(t){},a.onShowAction=function(t){this._levelManager.getComponent(v).onHideActionTower(this),this.action.setParent(this.node),this.actionSell.active=0!=this._levelTower,this.actionUpgrade.active=0!=this._levelTower&&this._levelTower!=this.backgrounds.length-1,this.actionBuyGun.active=0==this._levelTower,this.actionBuyRocket.active=0==this._levelTower,this.actionRepair.active=this._currentHealth<this._health&&this._levelTower>0,this.actionRepair.getComponentInChildren(p).string=this.getCostRepair().toString(),this.actionSell.getComponentInChildren(p).string=this.getCostSell().toString(),this.actionUpgrade.getComponentInChildren(p).string=this.getCostUpgrate().toString()},a.onUpgrade=function(){var t=this.getCostUpgrate();this._store.coinTotal<t||(this._levelTower++,this.onSetSprite(),y.emit(b,t))},a.getCostUpgrate=function(){return(this._turrentType==d.GunTower?this._costGun:this._costRocket)*(this._levelTower+1)},a.onBuyGun=function(){this._store.coinTotal<this._costGun||(this._levelTower++,this.setTurrent(this.gunTowerPrefab),this.onSetSprite(),this._turrentType=d.GunTower,y.emit(b,this._costGun))},a.onBuyRocket=function(){this._store.coinTotal<this._costRocket||(this._levelTower++,this.setTurrent(this.rocketTowerPrefab),this.onSetSprite(),this._turrentType=d.RocketTower,y.emit(b,this._costRocket))},a.setTurrent=function(t){this.fire.active=!1;var e=_(t);e.parent=this.node,this._turrent=e.getComponent(w),this._turrent.initTurrent(this._levelTower),this._currentHealth=this._health},a.onSell=function(){this.onSetSprite(),T(this._turrent.node).destroySelf().start(),this.healthBar.active=!1;var t=this.getCostSell();y.emit(S,t),this._levelTower=0,this._turrentType=d.None},a.onRepair=function(){var t=this,e=this.getCostRepair();this._currentHealth=this._health,this.healthBar.getComponentInChildren(u).fillRange=1,this.fire.active=!1,this.onHideAction(),y.emit(b,e),setTimeout((function(){t.healthBar.active&&(t.healthBar.active=!1)}),200)},a.getCostSell=function(){var t=this._turrentType==d.GunTower?this._costGun:this._costRocket;return Math.round(.75*t*this._levelTower)},a.getCost=function(){var t=this._turrentType==d.GunTower?this._costGun:this._costRocket;return Math.round(.5*t*this._levelTower)},a.getCostRepair=function(){var t=this._turrentType==d.GunTower?this._costGun:this._costRocket;return Math.round(t*this._levelTower*(1-this._currentHealth/this._health))},a.onSetSprite=function(){this.onHideAction(),this._turrent.initTurrent(this._levelTower),this._currentHealth=this._health,this._background.spriteFrame=this.backgrounds[this._levelTower],this._turrent.onSetLevelTurrent(this._levelTower)},a.onHideAction=function(){this.action.setParent(null)},a.setHP=function(t){this._currentHealth-=t,this.healthBar.active=!0,this.healthBar.getComponentInChildren(u).fillRange=this._currentHealth/this._health,this.action.active&&(this.actionRepair.active=!0),this._currentHealth<=0&&(this._levelTower=0,this._background.spriteFrame=this.backgrounds[this._levelTower],T(this._turrent.node).destroySelf().start(),this.healthBar.active=!1),this._currentHealth<this._health/2&&(this.fire.active=!0)},o(e,[{key:"levelManager",set:function(t){this._levelManager=t}}]),e}(g)).prototype,"gunTowerPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(O.prototype,"rocketTowerPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(O.prototype,"action",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(O.prototype,"actionBuyRocket",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(O.prototype,"actionUpgrade",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(O.prototype,"actionRepair",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(O.prototype,"actionSell",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(O.prototype,"actionBuyGun",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(O.prototype,"backgrounds",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(O.prototype,"healthBar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(O.prototype,"fire",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=O))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/Turent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ammo.ts","./Enums.ts","./Store.ts"],(function(t){var e,i,r,n,o,a,s,l,u,h,c,p,g,m,T,_,f,v,d,b,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,l=t.SpriteFrame,u=t.CCInteger,h=t.Prefab,c=t.Enum,p=t.Collider2D,g=t.Contact2DType,m=t.Vec3,T=t.Sprite,_=t.instantiate,f=t.Component},function(t){v=t.Ammo},function(t){d=t.CharacterType,b=t.GameState},function(t){w=t.default}],execute:function(){var y,z,S,C,A,D,N,k,P,B,M,x,E,F,I,R,G,L,H,O,j,V;o._RF.push({},"a6567xHBDpM04il2Im26kuz","Turent",void 0);var W=a.ccclass,q=a.property;t("Turent",(y=W("Turent"),z=q(s),S=q(s),C=q([l]),A=q([l]),D=q([u]),N=q(h),k=q({type:c(d)}),P=q({type:[c(d)]}),y((x=e((M=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"muzzleDouble",x,n(e)),r(e,"muzzleSingle",E,n(e)),r(e,"avatarSprites",F,n(e)),r(e,"shootAvatarSprites",I,n(e)),r(e,"gunBarrelNumbers",R,n(e)),r(e,"ammoPrefab",G,n(e)),r(e,"towerType",L,n(e)),r(e,"targetNames",H,n(e)),r(e,"damage",O,n(e)),r(e,"speed",j,n(e)),r(e,"reloadTime",V,n(e)),e._levelManager=void 0,e._target=void 0,e._avatar=void 0,e._isActive=!0,e._countdown=0,e._listTarget=[],e._angleShoot=void 0,e._levelTurrent=1,e._diffTowerToTarget=void 0,e._store=void 0,e._count=0,e}i(e,t);var o=e.prototype;return o.start=function(){this._store=w.getInstance(),this._levelManager=this._store.levelManager;var t=this.getComponent(p);t&&(t.on(g.BEGIN_CONTACT,this.onBeginContact,this),t.on(g.END_CONTACT,this.onEndContact,this)),this._countdown=this.reloadTime},o.update=function(t){(this._countdown+=t,0!=this._listTarget.length)&&(this._target||(this._target=this._listTarget[0]),this._count++,this.setAngleShoot(),this.node.angle=this._angleShoot,this._countdown>this.reloadTime&&this._listTarget.length>0&&this._isActive&&this._store.gameState==b.PlayGame&&(this._countdown=0,this.attackTarget()))},o.onBeginContact=function(t,e,i){var r=e.node;this.targetNames.find((function(t){return d[t]==r.name}))&&this._listTarget.push(r)},o.onEndContact=function(t,e,i){var r=e.node;this.targetNames.find((function(t){return d[t]==r.name}))&&(this._listTarget=this._listTarget.filter((function(t){return t!=r})),this._target=null)},o.setAngleShoot=function(){this._diffTowerToTarget=new m,m.subtract(this._diffTowerToTarget,this.node.parent.position,this._target.position),this._angleShoot=180-Math.atan2(this._diffTowerToTarget.x,this._diffTowerToTarget.y)*(180/Math.PI)},o.attackTarget=function(){this.shooting();var t=this._diffTowerToTarget.normalize();t.multiplyScalar(this.muzzleDouble.position.y);var e=this.gunBarrelNumbers[this._levelTurrent],i=this.node.parent.position,r=new m(i.x,i.y).subtract(t);1==e?this.setAmmo(r):(this.setAmmo(r,-10),this.setAmmo(r,10))},o.initTurrent=function(t){this._levelTurrent=t,this._avatar=this.node.getComponent(T),this.onSetSprite()},o.setAmmo=function(t,e){void 0===e&&(e=0);var i=new m(this._target.position.x+e,this._target.position.y+e),r=_(this.ammoPrefab);r.position=new m(t.x+e,t.y+e),r.parent=this._store.ammoLayer;var n=this.damage*this._levelTurrent;this.towerType!=d.RocketTower?r.getComponent(v).init(i,this.speed,n,this._angleShoot,this._levelTurrent):r.getComponent(v).initWithRocket(this._target,this.speed,n,this._angleShoot,this._levelTurrent)},o.shooting=function(){var t=this;this.muzzleSingle.active=1==this._levelTurrent&&this.towerType==d.GunTower,this.muzzleDouble.active=1!=this._levelTurrent&&this.towerType==d.GunTower,this.towerType==d.RocketTower&&(this._avatar.spriteFrame=this.shootAvatarSprites[this._levelTurrent]),setTimeout((function(){t.node&&(t.muzzleDouble.active=!1,t.muzzleSingle.active=!1,t.towerType==d.RocketTower&&(t._avatar.spriteFrame=t.avatarSprites[t._levelTurrent]))}),100)},o.onSetSprite=function(){this._avatar.spriteFrame=this.avatarSprites[this._levelTurrent],this._isActive=this._levelTurrent>0},o.onSetLevelTurrent=function(t){this._levelTurrent=t,this.onSetSprite()},e}(f)).prototype,"muzzleDouble",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(M.prototype,"muzzleSingle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(M.prototype,"avatarSprites",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(M.prototype,"shootAvatarSprites",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(M.prototype,"gunBarrelNumbers",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(M.prototype,"ammoPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(M.prototype,"towerType",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(M.prototype,"targetNames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[d.Soldier,d.Tank,d.Plane]}}),O=e(M.prototype,"damage",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),j=e(M.prototype,"speed",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),V=e(M.prototype,"reloadTime",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),B=M))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/TurrentTank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Turent.ts","./Ammo.ts"],(function(t){var e,i,n,r,o,a,s,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Vec3,o=t.instantiate},function(t){a=t.CharacterType},function(t){s=t.Turent},function(t){u=t.Ammo}],execute:function(){var h;i._RF.push({},"1bfcb/ssEJEtYeVMXxVHu0L","TurrentTank",void 0);var c=n.ccclass;t("TurrentTank",c("TurrentTank")(h=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.setAngleShoot=function(){this._diffTowerToTarget=new r,r.subtract(this._diffTowerToTarget,this.node.parent.position,this._target.parent.position),this._angleShoot=-90-Math.atan2(this._diffTowerToTarget.x,this._diffTowerToTarget.y)*(180/Math.PI)},n.attackTarget=function(){this._target||(this._target=this._listTarget[0].parent),this.shooting();var t=this._diffTowerToTarget.normalize();t.multiplyScalar(this.muzzleSingle.position.x);var e=this.node.parent.position,i=new r(e.x,e.y).subtract(t);this.setAmmo(i)},n.shooting=function(){var t=this;this.muzzleSingle.active=!0,setTimeout((function(){t.muzzleSingle.active=!1,t.towerType==a.RocketTower&&(t._avatar.spriteFrame=t.avatarSprites[t._levelTurrent])}),100)},n.setAmmo=function(t,e){void 0===e&&(e=0);var i=new r(this._target.parent.position.x+e,this._target.parent.position.y+e),n=o(this.ammoPrefab);n.position=new r(t.x+e,t.y+e),n.parent=this._store.ammoLayer,n.getComponent(u).init(i,this.speed,this.damage,this._angleShoot,this._levelTurrent)},i}(s))||h);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});